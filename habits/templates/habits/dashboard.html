{% extends 'habits/base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Personalised welcome message -->
    <h2>Welcome, {{ user.first_name|default:user.username }}!</h2>
      <!-- Current date display-->
    <p><strong>{{ today|date:"l, F j, Y" }}</strong></p>
    <!-- Motivational message with dynamic day of week -->
  <p><em>"ðŸ’ªKeep going, you can do it this {{ today|date:'l' }}!"</em></p>
</div>

<!-- Progress summary card -->
<div class="row mt-4">
    <!-- Today's Progress Card -->
    <div class="col-md-4 mb-3">
      <div class="card text-center">
        <div class="card-body">
          <h5 class="card-title">Today's Progress</h5>
          <!-- Progress Counter (Placeholder Values) -->
          <!-- TODO: Replace with dynamic data (tasks_completed/tasks_total) -->
          <p class="display-6 text-primary">0/0</p>
        </div>
      </div>
    </div>
</div>

<!-- Active Habits Card -->
<div class="col-md-4 mb-3">
    <div class="card text-center">
      <div class="card-body">
        <h5 class="card-title">Active Habits</h5>
        <!-- TODO: Replace with dynamic data -->
        <p class="display-6 text-purple">0</p>
        <!-- Add New Habit -->
        <a href="{% url 'habits:habit_create' %}">Add New</a>
      </div>
    </div>
  </div>

<!-- Notes Card -->
<div class="col-md-4 mb-3">
    <div class="card text-center">
      <div class="card-body">
        <h5 class="card-title">Recent Notes</h5>
        <!-- TODO: Replace with dynamic data -->
        <p class="display-6 text-purple">0</p>
        <!-- TODO: Update href to note list URL route -->
        <a href="#">View All</a>
      </div>
    </div>
  </div>

<!-- Dashboard Charts Section -->

<div class="row mt-4">
    <!-- Weekly Completion -->
    <div class="col-md-6">
      <div class="card p-3">
        <h5>Weekly Completion</h5>
        <!-- TODO: Connect to Google charts -->
        <div id="weekly-completion-chart" style="height: 300px;"></div>
      </div>
    </div>
  
    <!-- Category Completion -->
    <div class="col-md-6">
      <div class="card p-3">
        <h5>Today's Completion by Category</h5>
        <!-- TODO: Connect to habit category data  -->
        <div id="category-completion-chart" style="height: 300px;"></div>
      </div>
    </div>
  </div>

  <!-- Habit List Section -->
<div class="container mt-4">
  <h3>Your Habits</h3>
  <ul class="list-group">
    {% for habit in habits %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ habit.name }}
        <a href="{% url 'habits:habit_detail' habit.pk %}" class="btn btn-sm btn-outline-primary">View</a>
      </li>
    {% empty %}
      <li class="list-group-item">You don't have any habits yet.</li>
    {% endfor %}
  </ul>
</div>


{% endblock %}
